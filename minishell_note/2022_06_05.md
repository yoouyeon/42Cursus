# 2022.06.04

## 1. 자료구조 정의하기

명령어 부분 파싱을 시작했고, 명령어를 관리할 구조체를 정의했다.

```c
typedef struct s_cmd_line	t_cmd_line;

struct s_cmd_node // 공백을 기준으로 잘린 부분 하나하나의 정보
{
	int			type; // cmd의 종류
	char		*cmd; // 실제 입력된 커맨드 
	t_cmd_node	*prev; // 연결리스트 연결부 (이전)
	t_cmd_node	*next; // 연결리스트 연결부 (다음)
};

struct s_cmd_line // 한 줄에 입력된 명령어 라인에 대한 정보
{
	int			len; // 명령어 라인의 총 길이
	t_cmd_node	*head; // 연결리스트 시작부분
};
```

일단 각각의 커맨드들을 담고 있는 노드들을 연결리스트 형태로 연결해서 실행부에 넘겨주려는 생각을 하고 있고, 그렇게 구현을 하는 중이긴 한데 오늘 저녁먹고 잠깐 같은 과제 진행중인 카뎃분과 얘기를 나누어보니... 파이프, 리다이렉션 부분에 돌입하게 되면 진행 순서 때문에 연결리스트로 하게 되면 그 순서 부분에서 살짝 꼬일 수도 있겠다는 생각이 들었다.

일단 .. 일단은 기본 빌트인 함수 부분 짜는 부분은 연결리스트로 쭉 생각을 해 보고, 만약에 파이프, 리다이렉션 부분 구현을 시작했을 때 영 적절하지 않으면 노드는 그대로 두고 트리로 살짝 손보면 괜찮지 않을까 생각하곤 있다... 과연 정말 이렇게 생각처럼 휙휙 바꾸는게 가능할지는 잘 모르겠다.

## 2. readline으로 읽어들인 라인 공백 기준으로 자르기 (오직 자르기!)

읽어들인 한 줄을 공백 기준으로 잘라서 (따옴표가 있는 경우에는 조금 다르게 처리해줘야 한다.) 개수를 세어준 뒤에 연결리스트를 저장할 공간을 동적할당해주고, 다시 한 줄을 읽으면서 적절하게 노드의 정보를 채워주기로 했다.

기본적으로는 공백을 기준으로 하지만, 따옴표가 있을 경우에는 따옴표 한 쌍 사이가 노드 하나가 된다. 

**따옴표가 닫히지 않는 경우에 대해서는 좀 더 생각해봐야 한다.**

**만약에 여러 줄로 입력을 받는 경우를 고려해야 한다면 따옴표가 닫힐 때까지 계속 입력을 받는 것이 맞을 것 같긴 한데,**

**만약에 여러 줄 입력을 허용하지 않게 한다면 따옴표가 닫히지 않은 경우에 `'\0'` 문자를 만나게 된다면 유효하지 않은 인자 처리를 하면 되는거라서...**

**이 부분에 대해서는 서브젝트도 좀 읽어보고, 팀원과 얘기도 해 봐야 할 것 같다. 아직 구현은 안함!**

## 3. echo 명령어에 대해서

2의 코드를 짜면서 예제 커맨드 라인을 echo로 짰더니 (구현해야 할 옵션이 있어서 이쪽으로 선택함) echo의 동작에 대해서 좀 생각해보게 되었다.

마침 실행부 구현하던 팀원도 echo 구현 시작하려고 하고 있어서 이것저것 돌려보았는데 생각보다 완전 별로다. (해야할거 많단 소리..)

```shell
# 1. 단독 back slash 출력

## 1-1. 따옴표 밖에 있으면 무시한다.
echo \t\n\v\b\t\f\a

## 1-2. 따옴표 안에 있으면 그대로 출력한다.
echo "\t\n\v\b\t\f\a"

## 1-3. 만약에 실제 \t 가 의미하는 바 (tab)를 출력하고 싶으면 -e 옵션을 붇여주면 된다. (서브젝트 요구사항 외)
echo -e "\t\n\v\b\t\f\a"

# 2. 옵션에 관해서 (n)

## 2-1 옵션의 위치는 커맨드와 인자 사이가 고정이다. 그 외에는 잘못된 위치 혹은 인자로 처리된다.
echo -n hello world
echo hello world -n
-n echo hello world

## 2-2 없는 옵션에 "-"가 달리면 인자로 처리한다.
echo -s hello world

## 2-3 중복된 옵션은 하나로 처리한다.
echo -nnnnn

## 2-4 있는 옵션과 없는 옵션이 같이 붙어있으면 인자로 처리한다.
echo -ns hello world
```

e를 어떻게 해야 할지 고민을 좀 했는데 어쨌든 우리의 서브젝트에서 요구하는 echo 의 옵션은 n 하나이기 때문에 e는 없는 옵션, 즉 2-2 케이스로 처리하는게 맞겠다는 결론을 내렸다.
